My app Scuttle is going to be an anonymous feed-based platform for service members to engage with other members of their command, branch of service, and the entire military. The company version of this idea is roughly "Blind." The school version of this idea is roughly "Fizz." The community version of this idea used to be "Yik Yak." Please read the attached file thoroughly. It contains the code for Scuttle and the Firestore database rules.

For each file that needs to be edited, please give me the full code. Not just the code that needs editing; even the unchanged code. If any code involves an API key, include the actual API key in your response. When giving me edits, ensure that existing functionality is maintained.

Right now it is true that posts and comments from people who have deleted their accounts will show up as @[deleted]. That works well. The only place this is not true yet is for a given post detail page. If Alice was a user without a username (effectively @anonymous) and she made a post and deleted her account, and I somehow see her post in my feed or via me having saved that post, and I go to that Post Details page, it'll still show @anonymous. It should show @[deleted]